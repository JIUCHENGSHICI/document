{"config":{"lang":["ja"],"separator":"[\\s\\-\uff0c\u3002]+","pipeline":["stemmer"]},"docs":[{"location":"","title":"Nova\u6f2b\u6e38\u6307\u5357","text":"<p>\u6b22\u8fce\u6765\u5230Nova\u7684\u4e16\u754c\u3002</p>"},{"location":"#_1","title":"\u4e86\u89e3","text":"<p>\u60f3\u77e5\u9053\u4ec0\u4e48\u662fNova\uff1f\u4e86\u89e3\u4e00\u4e0b\u300c\u6838\u5fc3\u6982\u5ff5\u300d\u3002</p> <p>\u5982\u679c\u4f60\u5e0c\u671b\u5feb\u901f\u4f53\u9a8cNova\uff0c\u8bf7\u53c2\u8003\u300c\u5feb\u901f\u4e0a\u624b\u300d\u3002</p> <p>\u6709\u66f4\u591a\u5174\u8da3\uff1f\u60f3\u77e5\u9053\u6211\u4eec\u4e3a\u4ec0\u4e48\u7814\u53d1Nova\u3001Nova\u6709\u4ec0\u4e48\u4f18\u52bf\u3001\u548c\u540c\u7c7b\u9879\u76ee\u7684\u5bf9\u6bd4\uff1f\u8bf7\u6233\u8fd9\u91cc\u3002</p>"},{"location":"#_2","title":"\u4f7f\u7528","text":"<p>\u5982\u679c\u4f60\u5e0c\u671b\u5c1d\u8bd5\u4e00\u4e0bNova\uff0c\u4f46\u4e0d\u77e5\u9053\u5982\u4f55\u5f00\u59cb\uff1f</p> <p>\u53ef\u4ee5\u5148\u4ece\u6574\u4f53\u601d\u8003\u4e00\u4e0b\uff1a\u5982\u4f55\u91c7\u96c6\u4e1a\u52a1\u7684\u65e5\u5fd7\uff0c\u5982\u4f55\u5f62\u6210\u4e00\u4e2a\u5b8c\u5584\u5e76\u9002\u5408\u5b9e\u9645\u9700\u6c42\u7684\u65e5\u5fd7\u67b6\u6784\uff1f \u8fd9\u91cc\u6709\u4e00\u4e2a\u53c2\u8003\u3002</p> <p>\u63a5\u7740\uff0c\u4f60\u53ef\u4ee5\u9009\u62e9\u9002\u5408\u7684\u4e1a\u52a1\u300c\u573a\u666f\u300d\uff0c\u67e5\u770bNova\u5728Kubernetes\u4e0b\u7684\u6700\u4f73\u5b9e\u8df5\u3002</p> <p>\u8fd9\u91cc\u8fd8\u6d89\u53ca\u5230\u5982\u4f55\u6839\u636e\u5b9e\u9645\u60c5\u51b5\u300c\u90e8\u7f72\u300dNova\u3002</p> <p>\u53e6\u5916\uff0c\u60f3\u67e5\u770b\u5177\u4f53\u7ec4\u4ef6\u7684\u4f7f\u7528\u65b9\u5f0f\uff0c\u8bf7\u53c2\u8003\u300c\u914d\u7f6e\u300d\u3002</p>"},{"location":"#_3","title":"\u89e3\u7b54","text":"<p>\u5728\u4f7f\u7528Nova\u7684\u65f6\u5019\u9047\u5230\u95ee\u9898\uff1f \u8bf7\u63d0issues\u6216\u8005\u8054\u7cfb\u6211\u4eec\u3002</p> <p>\u5fae\u4fe1\u626b\u7801\u52a0\u5165Nova\u8ba8\u8bba\u7fa4\uff1a\uff08\u8001\u7684\u5fae\u4fe1\u5df2\u6ee1\uff0c\u672a\u901a\u8fc7\u7684\u8bf7\u91cd\u65b0\u626b\u7801\uff09</p> <p></p>"},{"location":"#_4","title":"\u53c2\u4e0e","text":"<p>\u5982\u679c\u4f60\u5bf9Nova\u7684\u5177\u4f53\u5b9e\u73b0\u611f\u5174\u8da3\uff0c\u60f3\u53c2\u4e0eNova\u5f00\u6e90\u7684\u7814\u53d1\uff1f\u60f3\u81ea\u7814\u63d2\u4ef6\uff1f\u8bf7\u770b\u300c\u5f00\u53d1\u624b\u518c\u300d\u3002  </p>"},{"location":"trace-agent/","title":"trace-agent \u4ecb\u7ecd","text":""},{"location":"trace-agent/#_1","title":"\u7b80\u4ecb","text":"<p>trace-agent \u662f\u4e00\u4e2a\u7528\u4e8e\u76d1\u63a7\u96c6\u7fa4\u4e2d\u5404\u4e2a\u8282\u70b9\u7684\u5de5\u5177. \u5b83\u4f1a\u5b9a\u671f\u91c7\u96c6\u8282\u70b9\u7684\u6307\u6807\u6570\u636e, \u5e76\u5c06\u6570\u636e\u4e0a\u62a5\u5230\u6307\u5b9a\u7684OLTP Exporter\u5730\u5740.</p>"},{"location":"trace-agent/#_2","title":"\u6784\u5efa","text":"<p>\u53c2\u8003 \u6784\u5efa\u6587\u6863 \u6784\u5efa trace-agent.</p>"},{"location":"trace-agent/#_3","title":"\u542f\u52a8","text":"<pre><code>./trace-agent -c /path/to/config.json\n</code></pre>"},{"location":"trace-agent/#_4","title":"\u914d\u7f6e","text":"<p>\u53c2\u8003 \u914d\u7f6e\u6587\u6863 \u914d\u7f6e trace-agent.</p>"},{"location":"trace-agent/#_5","title":"\u4e0a\u62a5\u5185\u5bb9","text":"<p>\u53c2\u8003 \u4e0a\u62a5\u5185\u5bb9\u6587\u6863 \u67e5\u770b trace-agent \u4e0a\u62a5\u7684\u5185\u5bb9.</p>"},{"location":"trace-agent/build/","title":"trace-agent \u6784\u5efa","text":""},{"location":"trace-agent/build/#_1","title":"\u6982\u8ff0","text":"<p>\u76ee\u524d\u6709\u652f\u6301\u4e24\u79cd\u65b9\u5f0f\u6784\u5efa, \u5206\u522b\u5bf9\u5e94\u4e24\u79cd\u4e0d\u540c\u7684\u96c6\u6210\u7b2c\u4e09\u65b9\u5e93\u7684\u65b9\u5f0f. 1. <code>package</code>\u6a21\u5f0f. \u8fd9\u79cd\u6a21\u5f0f\u4e0b\u9700\u8981\u9884\u7f16\u8bd1\u5b89\u88c5\u7b2c\u4e09\u65b9\u5e93, \u8be5\u5e93\u4f1a\u9ed8\u8ba4\u5b89\u88c5\u5230<code>.build/install</code>\u76ee\u5f55\u4e0b. 2. <code>module</code>\u6a21\u5f0f. \u8fd9\u79cd\u6a21\u5f0f\u4e0b\u4f1a\u76f4\u63a5\u4ece\u6e90\u7801\u7f16\u8bd1\u7b2c\u4e09\u65b9\u5e93, \u6bcf\u6b21\u7f16\u8bd1\u7684\u8017\u65f6\u6bd4\u8f83\u957f.</p> <p>\u540c\u65f6\u4e3a\u4e86\u65b9\u4fbf\u6784\u5efa, \u53ef\u4ee5\u4f7f\u7528<code>CMakePresets.json</code>\u6587\u4ef6\u4fdd\u5b58\u6784\u5efa\u53c2\u6570, \u4e0d\u9700\u8981\u5728\u547d\u4ee4\u884c\u624b\u52a8\u8bbe\u7f6e\u53c2\u6570.</p>"},{"location":"trace-agent/build/#_2","title":"\u73af\u5883\u8981\u6c42","text":"<ul> <li>CMake &gt;= 3.8</li> <li>\u7f16\u8bd1\u5668\u9700\u8981\u652f\u6301 C++17</li> </ul>"},{"location":"trace-agent/build/#docker","title":"\u4f7f\u7528docker\u6784\u5efa","text":"<p>\u8fd9\u91cc\u6709\u4e00\u4e2a\u9884\u7f16\u8bd1\u597d\u7684docker\u955c\u50cf, \u4f60\u53ef\u4ee5\u4f7f\u7528\u8be5\u955c\u50cf\u6784\u5efa\u9879\u76ee.</p> <pre><code>docker pull aronic/cppdev:latest\n</code></pre>"},{"location":"trace-agent/build/#1-package","title":"1. package\u6a21\u5f0f","text":"<p><code>package</code>\u6a21\u5f0f\u662f\u9ed8\u8ba4\u5b89\u88c5\u6a21\u5f0f, \u4e0d\u9700\u8981\u989d\u5916\u8bbe\u7f6e\u53c2\u6570. 1. \u9996\u5148\u9700\u8981\u9884\u7f16\u8bd1\u7b2c\u4e09\u65b9\u5e93. \u5982\u679c\u5df2\u7ecf\u5b89\u88c5\u8fc7, \u53ef\u4ee5\u8df3\u8fc7\u8fd9\u4e00\u6b65. \u91cd\u590d\u6267\u884c\u811a\u6b65\u4e0d\u4f1a\u5f15\u8d77\u91cd\u590d\u5b89\u88c5. Docker\u955c\u50cf\u91cc\u9762\u5df2\u7ecf\u5b89\u88c5\u597d\u4e86\u7b2c\u4e09\u65b9\u5e93, \u53ef\u4ee5\u76f4\u63a5\u8df3\u8fc7\u8fd9\u4e00\u6b65. <pre><code>./build_third_party.sh\n</code></pre></p> <ol> <li> <p>\u4e3a\u5f53\u524dshell\u8bbe\u7f6e\u73af\u5883\u53d8\u91cf, \u4f7f\u5f97cmake\u80fd\u591f\u627e\u5230\u7b2c\u4e09\u65b9\u5e93. <pre><code>source setup_env.sh\n</code></pre></p> </li> <li> <p>\u4f7f\u7528cmake\u6784\u5efa\u9879\u76ee. <pre><code>mkdir build\ncmake -S . -B build \\\n-DCMAKE_BUILD_TYPE=Release \\\n-DTHIRD_PARTY_INSTALL_DIR=\"${THIRD_PARTY_INSTALL_DIR}\" \\\n-DCMAKE_MODULE_PATH=\"${THIRD_PARTY_INSTALL_DIR}/lib/cmake;${THIRD_PARTY_INSTALL_DIR}/lib64/cmake\" \\\n-DCMAKE_PREFIX_PATH=${THIRD_PARTY_INSTALL_DIR} \\\n-DOPENSSL_ROOT_DIR=${THIRD_PARTY_INSTALL_DIR} \\\n-DOPENSSL_INCLUDE_DIR=${THIRD_PARTY_INSTALL_DIR}/include \\\n-DOPENSSL_CRYPTO_LIBRARY=${THIRD_PARTY_INSTALL_DIR}/lib/libcrypto.a \\\n-DOPENSSL_SSL_LIBRARY=${THIRD_PARTY_INSTALL_DIR}/lib/libssl.a\ncmake --build . --target trace-agent\n</code></pre></p> </li> </ol>"},{"location":"trace-agent/build/#2-module","title":"2. <code>module</code>\u6a21\u5f0f","text":"<p>module \u6a21\u5f0f\u4e0b\u4f1a\u96c6\u6210\u7b2c\u4e09\u65b9\u7684CMakeLists.txt\u6587\u4ef6, \u4ece\u6e90\u7801\u7f16\u8bd1\u7b2c\u4e09\u65b9\u5e93. \u8fd9\u79cd\u65b9\u5f0f\u7f16\u8bd1\u65f6\u95f4\u4f1a\u6bd4\u8f83\u957f. \u4e0d\u63a8\u8350\u8fd9\u79cd\u65b9\u5f0f. \u5f53\u524d\u7684module\u6a21\u5f0f\u6709\u7f16\u8bd1\u95ee\u9898. \u8bf7\u4f7f\u7528package\u6a21\u5f0f.</p>"},{"location":"trace-agent/build/#cmakelisttxt","title":"CMakeList.txt \u53c2\u6570\u8bf4\u660e","text":""},{"location":"trace-agent/build/#debug","title":"Debug\u6a21\u5f0f","text":"<p>\u4f7f\u7528 <code>CMAKE_BUILD_TYPE=Debug</code> \u6307\u5b9a\u4e3aDebug\u6a21\u5f0f, \u5728Debug\u6a21\u5f0f\u4e0b\u652f\u6491\u5982\u4e0b\u7684\u53c2\u6570.</p> <ul> <li><code>SANITIZER_TYPE</code> \u6307\u5b9a\u4f7f\u7528\u7684Sanitizer\u7c7b\u578b. \u53ef\u9009\u503c\u4e3a <code>none</code>, <code>address</code>, <code>leak</code>, <code>thread</code>, <code>undefined</code>. \u9ed8\u8ba4\u503c\u4e3a <code>none</code>.</li> <li><code>ENABLE_IWYU</code> \u6307\u5b9a\u662f\u5426\u542f\u7528include-what-you-use\u5de5\u5177. \u53ef\u9009\u503c\u4e3a <code>ON</code>, <code>OFF</code>. \u9ed8\u8ba4\u503c\u4e3a <code>OFF</code>.</li> </ul>"},{"location":"trace-agent/build/#release","title":"Release \u6a21\u5f0f","text":"<p>\u4f7f\u7528 <code>CMAKE_BUILD_TYPE=Release</code> \u6307\u5b9a\u4e3aRelease\u6a21\u5f0f. Release \u53d1\u5e03\u7684\u4e8c\u8fdb\u5236\u643a\u5e26Debug\u4fe1\u606f, \u4f46\u662f\u4e0d\u4f1a\u542f\u7528Sanitizer. \u540c\u65f6\u7edd\u5927\u591a\u6570\u7b2c\u4e09\u65b9\u5e93\u662f\u9759\u6001\u94fe\u63a5\u7684.</p>"},{"location":"trace-agent/build/#cmakepresetsjson","title":"\u4f7f\u7528CMakePresets.json","text":"<p>\u5982\u679c\u4f60\u7684CMake\u7248\u672c\u652f\u6301CMakePresets.json, \u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528\u8be5\u6587\u4ef6\u6784\u5efa\u9879\u76ee. CMakePresets.json \u6587\u4ef6\u53ef\u4ee5\u4fdd\u5b58CMake\u53c2\u6570\u548c\u914d\u7f6e\u9879, \u4e0d\u9700\u8981\u5728\u547d\u4ee4\u884c\u624b\u52a8\u8bbe\u7f6e.</p>"},{"location":"trace-agent/build/#cmakepresetsjson_1","title":"CMakePresets.json \u6587\u4ef6\u5185\u5bb9","text":"<pre><code>{\n\"version\": 2,\n\"configurePresets\": [\n{\n\"name\": \"default\",\n\"generator\": \"Ninja\",\n\"binaryDir\": \"/tmp/build-trace-agent\",\n\"cacheVariables\": {\n\"THIRD_PARTY_INSTALL_DIR\": \"$env{THIRD_PARTY_INSTALL_DIR}\",\n\"CMAKE_MODULE_PATH\": \"$env{THIRD_PARTY_INSTALL_DIR}/lib/cmake\",\n\"CMAKE_PREFIX_PATH\": \"$env{THIRD_PARTY_INSTALL_DIR}\",\n\"CMAKE_BUILD_TYPE\": \"Debug\",\n\"SANITIZER_TYPE\": \"none\",\n\"ENABLE_IWYU\": \"ON\"\n}\n},\n{\n\"name\": \"release\",\n\"generator\": \"Ninja\",\n\"binaryDir\": \"/tmp/release-trace-agent\",\n\"cacheVariables\": {\n\"THIRD_PARTY_INSTALL_DIR\": \"$env{THIRD_PARTY_INSTALL_DIR}\",\n\"CMAKE_MODULE_PATH\": \"$env{THIRD_PARTY_INSTALL_DIR}/lib/cmake\",\n\"CMAKE_PREFIX_PATH\": \"$env{THIRD_PARTY_INSTALL_DIR}\",\n\"CMAKE_BUILD_TYPE\": \"Release\",\n\"SANITIZER_TYPE\": \"none\",\n\"ENABLE_IWYU\": \"OFF\"\n}\n}\n],\n\"buildPresets\": [\n{\n\"name\": \"default\",\n\"configurePreset\": \"default\"\n}\n]\n}\n</code></pre>"},{"location":"trace-agent/build/#cmakepresetsjson_2","title":"\u4f7f\u7528CMakePresets.json","text":"<pre><code>source setup_env.sh # \u8bbe\u7f6e\u73af\u5883\u53d8\u91cf\ncmake --preset=default\n</code></pre>"},{"location":"trace-agent/config/","title":"trace-agent \u914d\u7f6e","text":""},{"location":"trace-agent/config/#_1","title":"\u914d\u7f6e\u8bf4\u660e","text":"\u914d\u7f6e\u9879\u76ee \u8bf4\u660e <code>cluster</code> \u96c6\u7fa4\u540d\u79f0 <code>company_uuid</code> \u516c\u53f8UUID <code>docker_unix_domain_socket</code> Docker\u7684Unix Domain Socket\u8def\u5f84 <code>log_level</code> \u65e5\u5fd7\u7ea7\u522b, \u53ef\u9009\u9879: [\"trace\", \"debug\", \"info\", \"warn\", \"error\"] <code>node_report_addr</code> \u4e0a\u62a5\u5730\u5740, GRPC\u90e8\u5206 <code>oltp_exporter_addr</code> OLTP Exporter\u5730\u5740 <code>sampling_period</code> \u6307\u6807\u91c7\u96c6\u5468\u671f"},{"location":"trace-agent/config/#_2","title":"\u5b9e\u4f8b\u914d\u7f6e\u6587\u4ef6","text":"<pre><code>{\n\"cluster\": \"default\",\n\"company_uuid\": \"217057afc5769cbeea96766334f7e7ec\",\n\"docker_unix_domain_socket\": \"/run/docker.sock\",\n\"log_level\": \"debug\",\n\"node_report_addr\": {\n\"host\": \"81.71.98.26\",\n\"port\": 10050\n},\n\"oltp_exporter_addr\": {\n\"host\": \"81.71.98.26\",\n\"port\": 4317\n},\n\"sampling_period\": 2\n}\n</code></pre>"},{"location":"trace-agent/config/#_3","title":"\u4f7f\u7528\u914d\u7f6e","text":"<pre><code>./trace-agent -c /path/to/config.json\n</code></pre>"},{"location":"trace-agent/report/","title":"trace-agent\u4e0a\u62a5\u5185\u5bb9","text":"<p>\u91c7\u96c6\u6307\u6807:</p> <ul> <li>CGroup\u6307\u6807</li> <li>CPU\u6307\u6807</li> <li>\u78c1\u76d8\u4f7f\u7528\u6307\u6807</li> <li>\u5bb9\u5668\u6307\u6807</li> <li>GPU\u6307\u6807</li> <li>Memory\u6307\u6807</li> <li>\u7f51\u7edc\u6307\u6807</li> <li>\u8fdb\u7a0b\u6307\u6807</li> </ul>"},{"location":"trace-agent/report/#oltp","title":"OLTP\u6307\u6807","text":"\u8d44\u6e90 \u6307\u6807 \u5185\u5bb9 \u5c5e\u6027\u5217\u8868 \u662f\u5426\u5b8c\u6210 \u7cfb\u7edf \u8fd0\u884c\u65f6\u95f4(Uptime) \u4e3b\u673a\u5f00\u542f\u4e4b\u540e\u8fd0\u884c\u7684\u65f6\u95f4 host_object_id \u7cfb\u7edf \u6587\u4ef6\u63cf\u8ff0\u7b26\u6570\u91cf \u76d1\u63a7\u7cfb\u7edf\u4e2d\u4f7f\u7528\u7684\u6587\u4ef6\u63cf\u8ff0\u7b26\u6570\u91cf host_object_id \u5185\u5b58 \u4f7f\u7528\u7387 \u5df2\u4f7f\u7528\u5185\u5b58/\u673a\u5668\u603b\u5185\u5b58 host_object_id \u8fdb\u7a0b \u8fdb\u7a0b\u6570\u91cf host_object_id"},{"location":"trace-agent/report/cgroup/","title":"CGroup \u6307\u6807","text":"<p>\u8fd9\u7bc7\u6587\u7ae0\u662f\u5bf9Linux CGroup V2\u7684\u4fe1\u606f\u91c7\u96c6\u7684\u8be6\u7ee8\u63cf\u8ff0\u3002</p>"},{"location":"trace-agent/report/cgroup/#_1","title":"\u5b57\u6bb5\u89e3\u91ca","text":""},{"location":"trace-agent/report/cgroup/#cgroupmount","title":"CGroupMount","text":"\u5b57\u6bb5 \u7c7b\u578b \u63cf\u8ff0 mount_point string CGroup\u6302\u8f7d\u70b9 cgroup CGroupController CGroup\u63a7\u5236\u5668 cpu CGroupCPUController CPU\u63a7\u5236\u5668 cpuset CGroupCPUSetController CPUSet\u63a7\u5236\u5668 hugetlb CGroupHugeTLBController HugeTLB\u63a7\u5236\u5668 io CGroupIOController IO\u63a7\u5236\u5668 memory CGroupMemoryController Memory\u63a7\u5236\u5668 misc CGroupMiscController Misc\u63a7\u5236\u5668 pids CGroupPidsController Pids\u63a7\u5236\u5668 rdma CGroupRDMAController RDMA\u63a7\u5236\u5668 children CGroupMount \u5b50CGroup"},{"location":"trace-agent/report/cgroup/#cgroupcontroller","title":"CGroupController","text":"\u5b57\u6bb5 \u7c7b\u578b \u6765\u6e90 controllers repeated string cgroup.controllers events CGroupEvent cgroup.events freeze int32 cgroup.freeze max_depth oneof cgroup.max.depth max_descendants oneof cgroup.max.descendants pressure int32 cgroup.pressure procs repeated int32 cgroup.procs stat CGroupStat cgroup.stat threads repeated int32 cgroup.threads type string cgroup.type"},{"location":"trace-agent/report/cgroup/#cgroupevent","title":"CGroupEvent","text":"\u5b57\u6bb5 \u7c7b\u578b \u63cf\u8ff0 populated int32 populated frozen int32 frozen"},{"location":"trace-agent/report/cgroup/#cgroupstat","title":"CGroupStat","text":"\u5b57\u6bb5 \u7c7b\u578b \u63cf\u8ff0 nr_descendants int32 \u540e\u4ee3\u6570\u91cf nr_dying_descendants int32 \u6b7b\u4ea1\u540e\u4ee3\u6570\u91cf"},{"location":"trace-agent/report/cgroup/#cgroupcpucontroller","title":"CGroupCPUController","text":"\u5b57\u6bb5 \u7c7b\u578b \u6765\u6e90 idle int32 cpu.idle max CGroupCPUMax cpu.max max_burst int32 cpu.max.burst pressure Pressure cpu.pressure stat CGroupCPUStat cpu.stat stat_local CGroupCPUStat cpu.stat.local uclamp_max int32/string cpu.uclamp.max uclamp_min float cpu.uclamp.min weight int32 cpu.weight weight_nice int32 cpu.weight.nice"},{"location":"trace-agent/report/cgroup/#cgroupcpumax","title":"CGroupCPUMax","text":"\u5b57\u6bb5 \u7c7b\u578b \u63cf\u8ff0 max int32/string \u6700\u5927\u503c period string \u6700\u5927\u503c"},{"location":"trace-agent/report/cgroup/#pressure","title":"Pressure","text":"\u5b57\u6bb5 \u7c7b\u578b \u63cf\u8ff0 some PSI some full PSI full"},{"location":"trace-agent/report/cgroup/#psi","title":"PSI","text":"\u5b57\u6bb5 \u7c7b\u578b \u63cf\u8ff0 avg10 float avg10 avg60 float avg60 avg300 float avg300 total float total"},{"location":"trace-agent/report/cgroup/#cgroupcpustat","title":"CGroupCPUStat","text":"\u5b57\u6bb5 \u7c7b\u578b \u63cf\u8ff0 usage_usec int64 usage_usec user_usec int64 user_usec system_usec int64 system_usec core_sched_force_idle_usec int64 core_sched_force_idle_usec nr_periods int32 nr_periods nr_throttled int32 nr_throttled throttled_usec int64 throttled_usec nr_bursts int32 nr_bursts burst_usec int64 burst_usec"},{"location":"trace-agent/report/cgroup/#cgroupcpusetcontroller","title":"CGroupCPUSetController","text":"\u5b57\u6bb5 \u7c7b\u578b \u6765\u6e90 cpus int32[] cpuset.cpus cpus_effective int32[] cpuset.cpus.effective cpus_exclusive int32[] cpuset.cpus.exclusive cpus_exclusive_effective int32[] cpuset.cpus.exclusive.effective cpus_partition string cpuset.cpus.partition mems int32[] cpuset.mems mems_effective int32[] cpuset.mems.effective"},{"location":"trace-agent/report/cgroup/#cgrouphugetlbcontroller","title":"CGroupHugeTLBController","text":"\u5b57\u6bb5 \u7c7b\u578b \u63cf\u8ff0 tlb mapTLBControlInfo&gt; HugeTLB\u63a7\u5236\u5668"},{"location":"trace-agent/report/cgroup/#tlbcontrolinfo","title":"TLBControlInfo","text":"<p>\u5982\u4e0b\u5b57\u6bb5\u4e2d, 'XXX' \u662f\u4e00\u4e2a\u5360\u4f4d\u7b26, \u4e00\u822c\u6765\u8bf4\u6307\u4ee3\u5982\u4e0b\u7684\u6587\u4ef6.</p> <ul> <li><code>hugetlb.1GB.current</code></li> <li><code>hugetlb.2MB.current</code></li> <li><code>...</code></li> </ul> \u5b57\u6bb5 \u7c7b\u578b \u6765\u6e90 current int32 hugetlb.XXX.current events TLBEvents hugetlb.XXX.events events_local TLBEvents hugetlb.XXX.events.local max int32/string hugetlb.XXX.max rsvd_current int32 hugetlb.XXX.rsvd.current rsvd_max int32/string hugetlb.XXX.rsvd.max"},{"location":"trace-agent/report/cgroup/#tlbevents","title":"TLBEvents","text":"\u5b57\u6bb5 \u7c7b\u578b \u63cf\u8ff0 max int32/string max period int32 period"},{"location":"trace-agent/report/cgroup/#cgroupiocontroller","title":"CGroupIOController","text":"\u5b57\u6bb5 \u7c7b\u578b \u6765\u6e90 max CGroupIOMax io.max pressure Pressure io.pressure prio_class int32 io.prio.class stat CGroupIOStat io.stat weight int32 io.weight"},{"location":"trace-agent/report/cgroup/#cgroupiomax","title":"CGroupIOMax","text":"\u5b57\u6bb5 \u7c7b\u578b \u63cf\u8ff0 major int32 \u4e3b\u8bbe\u5907\u53f7 minor int32 \u6b21\u8bbe\u5907\u53f7 rbps int32/string \u6bcf\u79d2\u6700\u5927\u8bfb\u53d6\u901f\u5ea6 wbps int32/string \u6bcf\u79d2\u6700\u5927\u5199\u5165\u901f\u5ea6 riops int32/string \u6bcf\u79d2\u6700\u5927\u8bfb\u53d6\u64cd\u4f5c\u6b21\u6570 wiops int32/string \u6bcf\u79d2\u6700\u5927\u5199\u5165\u64cd\u4f5c\u6b21\u6570"},{"location":"trace-agent/report/cgroup/#cgroupiostat","title":"CGroupIOStat","text":"\u5b57\u6bb5 \u7c7b\u578b \u63cf\u8ff0 MajorDevice int32 \u4e3b\u8bbe\u5907\u53f7 MinorDevice int32 \u6b21\u8bbe\u5907\u53f7 rbytes int64 \u8bfb\u53d6\u5b57\u8282\u6570\u91cf wbytes int64 \u5199\u5165\u5b57\u8282\u6570\u91cf rios int64 \u8bfb\u53d6\u64cd\u4f5c\u6b21\u6570 wios int64 \u5199\u5165\u64cd\u4f5c\u6b21\u6570 dbytes int64 \u4e22\u5f03\u5b57\u8282\u6570\u91cf dios int64 \u4e22\u5f03\u8bfb\u5199\u6b21\u6570"},{"location":"trace-agent/report/cgroup/#cgroupmemorycontroller","title":"CGroupMemoryController","text":"\u5b57\u6bb5 \u7c7b\u578b \u6765\u6e90 current int32 memory.current events CGroupMemoryEvent memory.events events_local CGroupMemoryEvent memory.events.local high int32/string memory.high low int32 memory.low max int32/string memory.max min int32 memory.min numa_stat CGroupNumaStat memory.numa_stat oom_group int32 memory.oom.group peak int32 memory.peak pressure Pressure memory.pressure stat CGroupMemoryStat memory.stat swap_current int64 memory.swap.current swap_events CGroupMemorySwapEvent memory.swap.events swap_high int32/string memory.swap.high swap_max int32/string memory.swap.max swap_peak int64 memory.swap.peak zswap_current int64 memory.zswap.current zswap_max int32/string memory.zswap.max zswap_writeback int32 memory.zswap.writeback"},{"location":"trace-agent/report/cgroup/#cgroupmemoryevent","title":"CGroupMemoryEvent","text":"\u5b57\u6bb5 \u7c7b\u578b \u63cf\u8ff0 low int32 low high int32 high max int32 max oom int32 oom oom_kill int32 oom_kill oom_group_kill int32 oom_group_kill"},{"location":"trace-agent/report/cgroup/#cgroupnumastat","title":"CGroupNumaStat","text":"<p>todo</p>"},{"location":"trace-agent/report/cgroup/#cgroupmemorystat","title":"CGroupMemoryStat","text":"<p>todo</p>"},{"location":"trace-agent/report/cgroup/#cgroupmemoryswapevent","title":"CGroupMemorySwapEvent","text":"\u5b57\u6bb5 \u7c7b\u578b \u63cf\u8ff0 high int64 high max int64 max fail int64 fail"},{"location":"trace-agent/report/cgroup/#cgroupmisccontroller","title":"CGroupMiscController","text":"<p>todo</p>"},{"location":"trace-agent/report/cgroup/#cgrouppidscontroller","title":"CGroupPidsController","text":"\u5b57\u6bb5 \u7c7b\u578b \u6765\u6e90 current int32 pids.current events int32 pids.events max int32/string pids.max peak int32 pids.peak"},{"location":"trace-agent/report/cgroup/#cgrouprdmacontroller","title":"CGroupRDMAController","text":"<p>todo</p>"},{"location":"trace-agent/report/cpu/","title":"CPU\u6307\u6807","text":""},{"location":"trace-agent/report/cpu/#_1","title":"\u4e0a\u62a5\u4fe1\u606f","text":"\u5b57\u6bb5 \u7c7b\u578b \u8bf4\u660e arch string \u67b6\u6784, \u5982: ARM, mips,x86 brand string \u54c1\u724c family string model string \u6a21\u578b stepping string uarch string implementer string architecture string \u67b6\u6784 variant string part string revision string \u7248\u672c platform string \u5e73\u53f0 machine string \u673a\u5668 cpu string instruction string microarchitecture string \u5fae\u67b6\u6784 processors string \u5904\u7406\u5668 vendor string \u5382\u5546 flags repeated string \u652f\u6491\u7684\u7279\u6027"},{"location":"trace-agent/report/disk/","title":"\u78c1\u76d8\u6307\u6807","text":""},{"location":"trace-agent/report/disk/#oltp","title":"OLTP\u6307\u6807","text":"<p>OLTP\u7684\u4e0a\u62a5\u5c5e\u6027: <code>host_object_id, device</code></p> \u6307\u6807 \u5185\u5bb9 \u8bfb\u53d6\u901f\u7387 \u78c1\u76d8\u6bcf\u79d2\u8bfb\u53d6\u901f\u5ea6 \u5199\u5165\u901f\u7387 \u78c1\u76d8\u6bcf\u79d2\u5199\u5165\u901f\u5ea6 \u4f7f\u7528\u7387 \u5df2\u7528\u7a7a\u95f4/\u78c1\u76d8\u603b\u5927\u5c0f"},{"location":"trace-agent/report/disk/#grpc","title":"GRPC\u4e0a\u62a5\u6307\u6807","text":"\u5b57\u6bb5 \u7c7b\u578b \u63cf\u8ff0 device string \u78c1\u76d8\u8bbe\u5907 type DiskType \u78c1\u76d8\u7c7b\u578b mount_point string \u78c1\u76d8\u6302\u8f7d\u70b9 filesystem string \u78c1\u76d8\u6587\u4ef6\u7cfb\u7edf vendor string \u78c1\u76d8\u751f\u4ea7\u5546 space_total uint64 \u78c1\u76d8\u5927\u5c0f(byte) space_free uint64 \u78c1\u76d8\u53ef\u7528\u5927\u5c0f(byte) space_used uint64 \u78c1\u76d8\u5df2\u4f7f\u7528\u5927\u5c0f(byte) space_usage double \u78c1\u76d8\u4f7f\u7528\u7387 inode_total uint64 \u78c1\u76d8inode\u603b\u6570 inode_free uint64 \u78c1\u76d8inode\u53ef\u7528\u6570 inode_used uint64 \u78c1\u76d8inode\u5df2\u4f7f\u7528\u6570 inode_usage uint64 \u78c1\u76d8inode\u4f7f\u7528\u7387"},{"location":"trace-agent/report/disk/#disktype","title":"DiskType","text":"<pre><code>enum DiskType {\nUnkonwn = 0;\nSSD = 1;\nHDD = 2;\n}\n</code></pre>"},{"location":"trace-agent/report/docker/","title":"\u5bb9\u5668\u6307\u6807","text":""},{"location":"trace-agent/report/docker/#_2","title":"\u4e0a\u62a5\u4fe1\u606f","text":"\u5b57\u6bb5 \u7c7b\u578b \u8bf4\u660e id string \u5bb9\u5668id name string \u5bb9\u5668\u540d\u5b57 state string \u5bb9\u5668\u72b6\u6001 command string \u5bb9\u5668\u8fd0\u884c\u7684\u547d\u4ee4 image_name string \u5bb9\u5668\u7684\u955c\u50cf\u540d\u5b57 cpu_limit int64 CPU\u9650\u5236 cpu_user_pct double CPU \u7528\u6237\u6001\u5360\u6bd4 cpu_system_pct double CPU \u5185\u6838\u6001\u5360\u6bd4 cpu_total_pct double \u5bb9\u5668cpu\u4f7f\u7528\u7387 rss_usage double \u5bb9\u5668\u5185\u5b58\u4f7f\u7528\u7387 memory_limit int64 \u5185\u5b58\u9650\u5236 memory_cache int64 \u5185\u5b58\u7f13\u5b58 memory_rss int64 rss\u5185\u5b58 memory_pct double \u5185\u5b58\u4f7f\u7528\u7387 rx_bytes uint64 \u5bb9\u5668\u8bfb\u53d6\u7684\u5b57\u8282\u6570 rx_bps double \u5bb9\u5668\u8bfb\u53d6\u7684\u901f\u7387 tx_bytes uint64 \u5bb9\u5668\u5199\u5165\u7684\u5b57\u8282\u6570 tx_bps double \u5bb9\u5668\u5199\u5165\u7684\u901f\u7387 net_rcvd_bps double \u5bb9\u5668\u7f51\u7edc\u63a5\u6536\u901f\u7387 net_sent_bps double \u5bb9\u5668\u7f51\u7edc\u53d1\u9001\u901f\u7387 start_time uint64 \u5bb9\u5668\u542f\u52a8\u65f6\u95f4\u70b9 running_time uint64 \u8fd0\u884c\u65f6\u95f4 addresses string \u5bb9\u5668\u7684\u5730\u5740 host_ips string \u4e3b\u673aIP pid int32 pid\u5217\u8868 pod_ip string pod ip pod_ports int32 pod\u7aef\u53e3 host string \u5bb9\u5668 health int32 \u5065\u5eb7 thread_count int32 \u7ebf\u7a0b\u6570\u91cf thread_limit int32 \u7ebf\u7a0b\u9650\u5236 kube_app string todo"},{"location":"trace-agent/report/gpu/","title":"GPU\u6307\u6807","text":""},{"location":"trace-agent/report/gpu/#oltp","title":"OLTP \u4e0a\u62a5\u6307\u6807","text":"<p>\u516c\u5171\u7684\u4e0a\u62a5\u5c5e\u6027: <code>company_uuid</code>, <code>host_object_id</code>, <code>gpu_uuid</code></p> \u6307\u6807 \u5185\u5bb9 \u5c5e\u6027\u5217\u8868 gpu_usage GPU\u7b97\u529b\u4f7f\u7528\u7387 gpu_memory_usage GPU\u5185\u5b58\u4f7f\u7528\u7387 gpu_process_memory_usage GPU\u5185\u5b58\u4f7f\u7528\u7387, \u533a\u5206\u8fdb\u7a0b \u989d\u5916\u589e\u52a0pid gpu_memory_used GPU\u5df2\u4f7f\u7528\u5185\u5b58\u5b57\u8282\u6570 gpu_memory_free GPU\u53ef\u7528\u5185\u5b58\u5b57\u8282\u6570 gpu_temperature GPU\u6e29\u5ea6 gpu_power_draw GPU\u5f53\u524d\u8f93\u51fa\u529f\u7387 gpu_core_clock GPU Core\u65f6\u949f\u9891\u7387 gpu_pcie_tx_bandwidth GPU\u53d1\u9001\u6570\u636e\u5e26\u5bbd gpu_pcie_rx_bandwidth GPU\u63a5\u6536\u6570\u636e\u5e26\u5bbd gpu_ecc_errors GPU ECC \u9519\u8bef\u6570\u91cf"},{"location":"trace-agent/report/memory/","title":"Memory\u6307\u6807","text":""},{"location":"trace-agent/report/memory/#grpc","title":"GRPC\u4e0a\u62a5\u5b57\u6bb5","text":"\u5b57\u6bb5\u540d \u5b57\u6bb5\u7c7b\u578b \u5b57\u6bb5\u63cf\u8ff0 \u6765\u6e90 total uint64 \u603b\u5185\u5b58 /proc/meminfo/MemTotal free uint64 \u5269\u4f59\u5185\u5b58 /proc/meminfo/MemFree swap_cached uint64 \u5171\u4eab\u5185\u5b58 /proc/meminfo/SwapCached used uint64 \u5df2\u7528\u5185\u5b58 total - (free + Buffers(not reportd) + swap_cached)"},{"location":"trace-agent/report/network/","title":"\u7f51\u7edc\u6307\u6807","text":"<ul> <li>\u5e26\u5bbd\u4f7f\u7528\u60c5\u51b5</li> <li>\u53d1\u5305\u60c5\u51b5</li> <li>\u6536\u5305\u60c5\u51b5</li> <li>TCP\u8fde\u63a5\u6570</li> </ul>"},{"location":"trace-agent/report/network/#oltp","title":"OLTP\u6307\u6807","text":"\u8d44\u6e90 \u6307\u6807 \u5185\u5bb9 \u5c5e\u6027\u5217\u8868 \u662f\u5426\u5b8c\u6210 \u7f51\u7edc \u63a5\u6536\u901f\u7387 host_object_id \u7f51\u7edc \u53d1\u9001\u901f\u7387 host_object_id"},{"location":"trace-agent/report/process/","title":"\u8fdb\u7a0b\u6307\u6807","text":""},{"location":"trace-agent/report/process/#grpc","title":"GRPC\u4e0a\u62a5\u6307\u6807","text":"\u5b57\u6bb5 \u7c7b\u578b \u63cf\u8ff0 \u6765\u6e90 pid uint64 \u8fdb\u7a0bid /proc/[pid] name string \u8fdb\u7a0b\u540d\u5b57 /proc/[pid]/status/Name path string \u8fdb\u7a0b\u8def\u5f84 /proc/[pid]/exe cmdline string \u542f\u52a8\u547d\u4ee4 /proc/[pid]/cmdline work_dir string \u5de5\u4f5c\u76ee\u5f55 /proc/[pid]/cwd ppid uint64 \u7236\u8fdb\u7a0bid /proc/[pid]/status/PPid uid int32 \u7528\u6237id /proc/[pid]/status/Uid user_name string \u7528\u6237\u540d \u901a\u8fc7 getpwuid \u83b7\u53d6 gid int32 \u7ec4id /proc/[pid]/status/Gid state ProcessState \u8fdb\u7a0b\u72b6\u6001 /proc/[pid]/status/State running_time double \u8fd0\u884c\u65f6\u957f(\u5355\u4f4d\u4e3a\u79d2) /proc/uptime - (/proc/[pid]/stat/start_time[22]) / sysconf(_SC_CLK_TCK) container_id string /proc/[pid]/cgroup open_fd_count uint64 \u6253\u5f00\u7684\u6587\u4ef6\u63cf\u8ff0\u7b26\u6570\u91cf /proc/[pid]/status/FDSize involuntary_ctx_switches uint64 \u88ab\u52a8\u4e0a\u4e0b\u6587\u5207\u6362\u6b21\u6570 /proc/[pid]/status/nonvoluntary_ctxt_switches voluntary_ctx_switches uint64 \u4e3b\u52a8\u4e0a\u4e0b\u6587\u5207\u6362\u6b21\u6570 /proc/[pid]/status/voluntary_ctxt_switches cpu_nice uint64 \u4f18\u5148\u7ea7 /proc/[pid]/stat/[19] threads_num uint64 \u7ebf\u7a0b\u6570\u91cf /proc/[pid]/status/Threads env_variables repeated EnvVariable \u73af\u5883\u53d8\u91cf /proc/[pid]/environ memory_usage ProcessMemoryUsage \u5185\u5b58\u4f7f\u7528\u7387 /proc/[pid]/statm iostat_read_bytes uint64 \u8bfb\u53d6\u5b57\u8282\u6570 /proc/[pid]/io/read_bytes iostat_write_bytes uint64 \u5199\u5165\u5b57\u8282\u6570 /proc/[pid]/io/write_bytes iostat_read_bytes_rate double \u8bfb\u53d6\u5b57\u8282\u901f\u7387 diff(iostat_read_bytes) / sample_period iostat_write_bytes_rate double \u5199\u5165\u5b57\u8282\u901f\u7387 diff(iostat_write_bytes) / sample_period cpu_user_time uint64 \u7528\u6237\u6001 cpu \u4f7f\u7528\u65f6\u95f4 (/proc/[pid]/stat/utime[14]) / sysconf(_SC_CLK_TCK) cpu_system_time uint64 \u5185\u6838\u6001 cpu \u4f7f\u7528\u65f6\u95f4 (/proc/[pid]/stat/stime[15]) / sysconf(_SC_CLK_TCK) cpu_user_pct double \u7528\u6237\u6001cpu \u4f7f\u7528\u7387 this.cpu_user_time / (/proc/uptime - this.running_time) cpu_system_pct double Kernel CPU \u4f7f\u7528\u7387\u767e\u5206\u6bd4 (this.cpu_system_time) / (/proc/uptime - this.running_time) cpu_total_pct double CPU\u603b\u4f53\u4f7f\u7528\u7387 this.cpu_user_pct + this.cpu_system_pct start_time int64 \u8fdb\u7a0b\u542f\u52a8\u65f6\u95f4\u70b9 time(null) - running_time is_kernel_thread bool \u662f\u5426\u662f\u5185\u6838\u8fdb\u7a0b gpu_usage ProcessGPUUsage GPU Memory Usage"}]}